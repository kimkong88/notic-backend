model Subscription {
  id                    String             @id @default(uuid())
  userId                String
  user                  User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  billingProvider       String             // e.g. lemon_squeezy, stripe
  billingCustomerId     String?
  billingSubscriptionId String?
  status                SubscriptionStatus
  expiredAt             DateTime?         // single "access ends at" â€“ from provider (period end, trial end); has access = expiredAt == null || now < expiredAt
  createdAt             DateTime          @default(now())
  updatedAt             DateTime          @updatedAt

  @@index([userId])
  @@index([billingSubscriptionId])
  @@unique([billingSubscriptionId])
}

enum SubscriptionStatus {
  paid     // Payment current or was made for the period (includes trial/beta from provider).
  canceled // Subscription canceled; access until expiredAt.
  past_due // Payment failed or overdue.
}
